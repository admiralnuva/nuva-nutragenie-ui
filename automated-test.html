<!DOCTYPE html>
<html>
<head>
    <title>Recipe Options Automated Test</title>
    <script>
        // Automated test for Recipe Options buttons
        function runComprehensiveTest() {
            console.log('🧪 STARTING COMPREHENSIVE RECIPE OPTIONS TEST');
            
            // Test sequence: various combinations and edge cases
            const testSequence = [
                'Chef\'s Choice',
                'Pantry Dishes', 
                'Chef\'s Choice', // Switch back
                'Take-Out',
                'Chef\'s Choice', // Switch again
                'Pantry Dishes',
                'Take-Out',
                'Create Dishes', // Navigation test
                'Chef\'s Choice', // After navigation
                'Pantry Dishes',
                'Take-Out'
            ];
            
            console.log('Test sequence:', testSequence);
            
            // Simulate clicking through sequence
            testSequence.forEach((button, index) => {
                setTimeout(() => {
                    console.log(`\n🔄 TEST STEP ${index + 1}: Clicking ${button}`);
                    
                    // Log current state before click
                    const beforeState = {
                        buttons: document.querySelectorAll('.bg-purple-600').length,
                        cards: document.querySelectorAll('.order-2').length
                    };
                    console.log('Before click:', beforeState);
                    
                    // Find and click the button
                    const buttons = Array.from(document.querySelectorAll('button'));
                    const targetButton = buttons.find(btn => 
                        btn.textContent?.trim() === button
                    );
                    
                    if (targetButton) {
                        targetButton.click();
                        console.log(`✅ Clicked ${button}`);
                        
                        // Check state after click
                        setTimeout(() => {
                            const afterState = {
                                buttons: document.querySelectorAll('.bg-purple-600').length,
                                cards: document.querySelectorAll('.order-2').length
                            };
                            console.log('After click:', afterState);
                        }, 100);
                    } else {
                        console.error(`❌ Could not find button: ${button}`);
                    }
                }, index * 2000); // 2 second intervals
            });
            
            // Final validation after all tests
            setTimeout(() => {
                console.log('\n🏁 FINAL VALIDATION');
                const finalState = {
                    selectedButtons: document.querySelectorAll('.bg-purple-600').length,
                    visibleCards: document.querySelectorAll('.order-2').length,
                    errors: []
                };
                
                if (finalState.selectedButtons > 1) {
                    finalState.errors.push('Multiple buttons selected');
                }
                
                if (finalState.visibleCards > 3) { // Recipe Options + max 1 content card + Personalize card
                    finalState.errors.push('Too many cards visible');
                }
                
                console.log('FINAL STATE:', finalState);
                
                if (finalState.errors.length === 0) {
                    console.log('✅ ALL TESTS PASSED');
                } else {
                    console.error('❌ TESTS FAILED:', finalState.errors);
                }
            }, testSequence.length * 2000 + 2000);
        }
        
        // Auto-run test when page loads
        window.addEventListener('load', () => {
            setTimeout(runComprehensiveTest, 3000); // Wait 3 seconds after page load
        });
    </script>
</head>
<body>
    <h1>Recipe Options Test Runner</h1>
    <p>Open browser console and navigate to /explore-recipes to see test results.</p>
    <button onclick="runComprehensiveTest()">Run Manual Test</button>
</body>
</html>