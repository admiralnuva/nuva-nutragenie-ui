<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="clientGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:0.1" />
      <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:0.2" />
    </linearGradient>
    <linearGradient id="routingGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EF4444;stop-opacity:0.1" />
      <stop offset="100%" style="stop-color:#DC2626;stop-opacity:0.2" />
    </linearGradient>
    <linearGradient id="mlGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:0.1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:0.2" />
    </linearGradient>
    <linearGradient id="backendGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:0.1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:0.2" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="900" fill="#F8FAFC"/>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1E293B">
    Enhanced NutraGenie Multi-Tenant Platform Architecture
  </text>
  
  <!-- Client Layer -->
  <rect x="50" y="60" width="1100" height="100" rx="10" fill="url(#clientGradient)" stroke="#3B82F6" stroke-width="2"/>
  <text x="600" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1E40AF">
    Multi-Platform Client Layer
  </text>
  <text x="150" y="110" font-family="Arial, sans-serif" font-size="12" fill="#475569">React Web App</text>
  <text x="300" y="110" font-family="Arial, sans-serif" font-size="12" fill="#475569">React Mobile</text>
  <text x="450" y="110" font-family="Arial, sans-serif" font-size="12" fill="#475569">Voice Interface</text>
  <text x="600" y="110" font-family="Arial, sans-serif" font-size="12" fill="#475569">White-Label Apps</text>
  <text x="800" y="110" font-family="Arial, sans-serif" font-size="12" fill="#475569">nutragenie.com</text>
  <text x="950" y="110" font-family="Arial, sans-serif" font-size="12" fill="#475569">diabetescare.com</text>
  <text x="1050" y="110" font-family="Arial, sans-serif" font-size="12" fill="#475569">seniorwellness.com</text>
  
  <!-- Tenant-Aware Routing Layer -->
  <rect x="50" y="180" width="1100" height="80" rx="10" fill="url(#routingGradient)" stroke="#EF4444" stroke-width="2"/>
  <text x="600" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#DC2626">
    Tenant-Aware Routing &amp; API Gateway Layer
  </text>
  <text x="150" y="230" font-family="Arial, sans-serif" font-size="12" fill="#7F1D1D">Domain Resolution</text>
  <text x="300" y="230" font-family="Arial, sans-serif" font-size="12" fill="#7F1D1D">Authentication &amp; Security</text>
  <text x="500" y="230" font-family="Arial, sans-serif" font-size="12" fill="#7F1D1D">Rate Limiting</text>
  <text x="650" y="230" font-family="Arial, sans-serif" font-size="12" fill="#7F1D1D">Request Routing</text>
  <text x="800" y="230" font-family="Arial, sans-serif" font-size="12" fill="#7F1D1D">Tenant Config</text>
  <text x="950" y="230" font-family="Arial, sans-serif" font-size="12" fill="#7F1D1D">API Versioning</text>
  
  <!-- ML/Personalization Layer -->
  <rect x="50" y="280" width="1100" height="100" rx="10" fill="url(#mlGradient)" stroke="#10B981" stroke-width="2"/>
  <text x="600" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#059669">
    ML Personalization &amp; Intelligence Layer (Neural Networks)
  </text>
  <text x="80" y="330" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">User Embeddings (NN)</text>
  <text x="220" y="330" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Recommendation Engine</text>
  <text x="380" y="330" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Behavioral Analysis (ML)</text>
  <text x="550" y="330" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Real-time Learning</text>
  <text x="720" y="330" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Deep Learning Models</text>
  <text x="880" y="330" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Feature Engineering</text>
  <text x="1020" y="330" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Model Serving</text>
  <text x="80" y="355" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Preference Evolution</text>
  <text x="220" y="355" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Collaborative Filtering</text>
  <text x="380" y="355" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Content-Based Filtering</text>
  <text x="550" y="355" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">A/B Testing Framework</text>
  <text x="720" y="355" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Reinforcement Learning</text>
  <text x="880" y="355" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Multi-Modal Fusion</text>
  <text x="1020" y="355" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Edge Inference</text>
  
  <!-- Backend Services Layer -->
  <rect x="50" y="400" width="1100" height="100" rx="10" fill="url(#backendGradient)" stroke="#8B5CF6" stroke-width="2"/>
  <text x="600" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7C3AED">
    Backend Microservices (FastAPI + Java)
  </text>
  <text x="100" y="450" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">User Service (FastAPI)</text>
  <text x="280" y="450" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Recipe Engine (Java)</text>
  <text x="450" y="450" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Nutrition Service (FastAPI)</text>
  <text x="650" y="450" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Analytics Service (Java)</text>
  <text x="850" y="450" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Notification Service</text>
  <text x="100" y="475" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Integration Service (FastAPI)</text>
  <text x="320" y="475" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Tenant Management (Java)</text>
  <text x="520" y="475" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Real-time Services</text>
  <text x="720" y="475" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">File Storage Service</text>
  <text x="920" y="475" font-family="Arial, sans-serif" font-size="12" fill="#4C1D95">Security Service</text>
  
  <!-- AI Components Layer -->
  <rect x="50" y="520" width="540" height="120" rx="10" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
  <text x="320" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#92400E">
    AI Components &amp; LLMs
  </text>
  <text x="70" y="570" font-family="Arial, sans-serif" font-size="11" fill="#78350F">1) LangChain - Multi-tenant LLM orchestration</text>
  <text x="70" y="590" font-family="Arial, sans-serif" font-size="11" fill="#78350F">2) GPT-4o - Nutrition Analysis, Recipe Gen, Voice/Vision</text>
  <text x="70" y="610" font-family="Arial, sans-serif" font-size="11" fill="#78350F">3) Claude 3.5 Sonnet - Complex Reasoning, Substitutions</text>
  <text x="70" y="630" font-family="Arial, sans-serif" font-size="11" fill="#78350F">4) Gemini Pro - Health Insights, Multi-cultural Recipes</text>
  
  <!-- External APIs -->
  <rect x="610" y="520" width="260" height="120" rx="10" fill="#ECFDF5" stroke="#10B981" stroke-width="2"/>
  <text x="740" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#065F46">
    External APIs (Tenant-Routed)
  </text>
  <text x="630" y="570" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">USDA Food Data API</text>
  <text x="630" y="590" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Spoonacular API</text>
  <text x="630" y="610" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Edamam API</text>
  <text x="630" y="630" font-family="Arial, sans-serif" font-size="11" fill="#064E3B">Payment Gateways</text>
  
  <!-- Real-time Services -->
  <rect x="890" y="520" width="260" height="120" rx="10" fill="#FEF2F2" stroke="#EF4444" stroke-width="2"/>
  <text x="1020" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#991B1B">
    Real-time Services
  </text>
  <text x="910" y="570" font-family="Arial, sans-serif" font-size="11" fill="#7F1D1D">WebRTC (Video Cooking)</text>
  <text x="910" y="590" font-family="Arial, sans-serif" font-size="11" fill="#7F1D1D">WebSocket (Voice Chat)</text>
  <text x="910" y="610" font-family="Arial, sans-serif" font-size="11" fill="#7F1D1D">Speech-to-Text</text>
  <text x="910" y="630" font-family="Arial, sans-serif" font-size="11" fill="#7F1D1D">Push Notifications</text>
  
  <!-- Data Layer -->
  <rect x="50" y="660" width="1100" height="100" rx="10" fill="#F1F5F9" stroke="#475569" stroke-width="2"/>
  <text x="600" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#334155">
    Multi-Tenant Data Layer
  </text>
  <text x="100" y="710" font-family="Arial, sans-serif" font-size="12" fill="#475569">PostgreSQL (Multi-tenant)</text>
  <text x="300" y="710" font-family="Arial, sans-serif" font-size="12" fill="#475569">Redis (Cache + Sessions)</text>
  <text x="500" y="710" font-family="Arial, sans-serif" font-size="12" fill="#475569">MongoDB (AI Features)</text>
  <text x="700" y="710" font-family="Arial, sans-serif" font-size="12" fill="#475569">AWS S3 (File Storage)</text>
  <text x="900" y="710" font-family="Arial, sans-serif" font-size="12" fill="#475569">ElasticSearch (Analytics)</text>
  <text x="120" y="735" font-family="Arial, sans-serif" font-size="12" fill="#475569">Users, Recipes, Nutrition</text>
  <text x="320" y="735" font-family="Arial, sans-serif" font-size="12" fill="#475569">ML Models, User Sessions</text>
  <text x="520" y="735" font-family="Arial, sans-serif" font-size="12" fill="#475569">Embeddings, Preferences</text>
  <text x="720" y="735" font-family="Arial, sans-serif" font-size="12" fill="#475569">Images, Audio, Videos</text>
  <text x="920" y="735" font-family="Arial, sans-serif" font-size="12" fill="#475569">Logs, Metrics, Search</text>
  
  <!-- Infrastructure Layer -->
  <rect x="50" y="780" width="1100" height="80" rx="10" fill="#EDE9FE" stroke="#8B5CF6" stroke-width="2"/>
  <text x="600" y="805" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#6D28D9">
    Infrastructure &amp; Deployment
  </text>
  <text x="120" y="830" font-family="Arial, sans-serif" font-size="12" fill="#581C87">Kubernetes Cluster</text>
  <text x="280" y="830" font-family="Arial, sans-serif" font-size="12" fill="#581C87">Docker Containers</text>
  <text x="450" y="830" font-family="Arial, sans-serif" font-size="12" fill="#581C87">Load Balancers</text>
  <text x="600" y="830" font-family="Arial, sans-serif" font-size="12" fill="#581C87">Auto-scaling</text>
  <text x="750" y="830" font-family="Arial, sans-serif" font-size="12" fill="#581C87">Monitoring</text>
  <text x="900" y="830" font-family="Arial, sans-serif" font-size="12" fill="#581C87">CI/CD Pipeline</text>
  <text x="1050" y="830" font-family="Arial, sans-serif" font-size="12" fill="#581C87">Security</text>
  
  <!-- Data Flow Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151" />
    </marker>
  </defs>
  
  <!-- Client to Routing -->
  <line x1="600" y1="160" x2="600" y2="180" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Routing to ML -->
  <line x1="600" y1="260" x2="600" y2="280" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- ML to Backend -->
  <line x1="600" y1="380" x2="600" y2="400" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Backend to AI/External -->
  <line x1="320" y1="500" x2="320" y2="520" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="740" y1="500" x2="740" y2="520" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="1020" y1="500" x2="1020" y2="520" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Backend to Data -->
  <line x1="600" y1="500" x2="600" y2="660" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Data to Infrastructure -->
  <line x1="600" y1="760" x2="600" y2="780" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Tenant Examples -->
  <text x="50" y="890" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1E293B">Multi-Tenant Examples:</text>
  <text x="250" y="890" font-family="Arial, sans-serif" font-size="11" fill="#475569">• nutragenie.com (General Wellness)</text>
  <text x="450" y="890" font-family="Arial, sans-serif" font-size="11" fill="#475569">• diabetescare.app (Diabetes Management)</text>
  <text x="700" y="890" font-family="Arial, sans-serif" font-size="11" fill="#475569">• seniorwellness.health (Senior Care)</text>
  <text x="950" y="890" font-family="Arial, sans-serif" font-size="11" fill="#475569">• kidnutrition.edu (Pediatric)</text>
</svg>